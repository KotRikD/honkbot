import re
from kutana import Plugin

plugin = Plugin(name="Фильтр плоих слов", priority=450)

malware = '''gl
bet
vto
tk
ml
goo
раб0та
sоль
накрутка
банка
сова
лопнула
clck
vtope
синий
суицид
убиваю
режу
резать
vkbot
orin
вступ
подп
подпишись
подписывайтесь
украл
okeygeek
hackpages
info-vk-id'''.splitlines()


# LIST By KotRik (vk.com/kotrik)
'''reg_exp = [r'(н|n)(а|4|@|a)(р|r)(k|к)(о|o|0)(т|t)(и|l|i|u)(к|k)',
           r'(з|3|z)(4|a|а|@)(k|к)(л|l|i)(4|a|а|@)(д|g)(к|k)(l|i|и|u)',
           r'(s|c|с)(o|о|0)(l|i|л)(b|ь)',
           r'(н|h|n)(а|@|4|а)(с|c)(в|w|v)(а|4|а|@)(й|y)',
           r'(м|m)(o|о|0)(s|c|с)(k|к)(в|w|v)(а|4|@|a)',
           r'(s|c|с)(п|p|r)(а|@|4|а)(й|y)(с|c)',
           r'(г|g)(4|a|@|а)(ш|sh|w)(и|u|i|l)(sh|ш|w)',
           r'(с|с|s|$)(k|к)(о|o|0)(p|р|r)(о|o|0)(s|c|с)(t|т)(ь|Ъ|.*)',
           r'(c|ц)(п|p)',
           r'(с|c|3)(о|о|0)(в|v)(а|4|@|a)']
'''

@plugin.on_has_text()
async def on_has_text(message, attachments, env):
    if env.eenv['admins'][0] == message.from_id:
        return "GOON"

    '''for reg in reg_exp:
        r = re.findall(reg, message.text[1:])
        if r:
            await env.reply("⛔ В вашем сообщении был найден запрещённый символ или слово.")
            return "DONE"
    '''
    for x in malware:
        if message.text.find(x) != -1:
            await env.reply("⛔ В вашем сообщении был найден запрещённый символ или слово.")
            return "DONE"


    return "GOON"

